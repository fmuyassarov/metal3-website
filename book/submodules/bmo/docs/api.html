<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>BMO - Metal³ Book</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../../favicon.png">
        
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="../../../overview/project-overview.html"><strong aria-hidden="true">1.</strong> Project Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../overview/metal3-components.html"><strong aria-hidden="true">1.1.</strong> Metal³ Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../overview/capm3/capm3.html"><strong aria-hidden="true">1.1.1.</strong> Cluster-Api-Provider-Metal³</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../overview/capm3/workflow.html"><strong aria-hidden="true">1.1.1.1.</strong> Workflow</a></li><li class="chapter-item expanded "><a href="../../../overview/capm3/api.html"><strong aria-hidden="true">1.1.1.2.</strong> API concepts</a></li></ol></li><li class="chapter-item expanded "><a href="../../../overview/bmo/bmo.html"><strong aria-hidden="true">1.1.2.</strong> Baremetal Operator</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../overview/bmo/ironic-integration.html"><strong aria-hidden="true">1.1.2.1.</strong> Ironic Integration</a></li><li class="chapter-item expanded "><a href="../../../overview/bmo/bmh-states.html"><strong aria-hidden="true">1.1.2.2.</strong> BaremetalHost Provisioning States</a></li><li class="chapter-item expanded "><a href="../../../overview/bmo/workflow.html"><strong aria-hidden="true">1.1.2.3.</strong> Workflow</a></li><li class="chapter-item expanded "><a href="../../../overview/bmo/api.html"><strong aria-hidden="true">1.1.2.4.</strong> API concepts</a></li></ol></li><li class="chapter-item expanded "><a href="../../../overview/metal3-dev-env.html"><strong aria-hidden="true">1.1.3.</strong> Metal³-Dev-Env</a></li><li class="chapter-item expanded "><a href="../../../overview/ipam/ip-address-manager.html"><strong aria-hidden="true">1.1.4.</strong> Ip-Address-Manager</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../overview/ipam/workflow.html"><strong aria-hidden="true">1.1.4.1.</strong> Workflow</a></li><li class="chapter-item expanded "><a href="../../../overview/ipam/api.html"><strong aria-hidden="true">1.1.4.2.</strong> API concepts</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../developer/developer-guide.html"><strong aria-hidden="true">2.</strong> Developer Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../developer/testing.html"><strong aria-hidden="true">2.1.</strong> Testing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../developer/testing/metal3-dev-env.html"><strong aria-hidden="true">2.1.1.</strong> Metal³-Dev-Env</a></li><li class="chapter-item expanded "><a href="../../../developer/testing/tilt.html"><strong aria-hidden="true">2.1.2.</strong> Tilt</a></li></ol></li><li class="chapter-item expanded "><a href="../../../developer/contollers.html"><strong aria-hidden="true">2.2.</strong> Custom Resources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../developer/controllers/Metal3Cluster.html"><strong aria-hidden="true">2.2.1.</strong> Metal3Cluster</a></li><li class="chapter-item expanded "><a href="../../../developer/controllers/Metal3Machine.html"><strong aria-hidden="true">2.2.2.</strong> Metal3Machine</a></li><li class="chapter-item expanded "><a href="../../../developer/controllers/BareMetalHost.html"><strong aria-hidden="true">2.2.3.</strong> BareMetalHost</a></li><li class="chapter-item expanded "><a href="../../../developer/controllers/Metal3MachineTemplate.html"><strong aria-hidden="true">2.2.4.</strong> Metal3MachineTemplate</a></li><li class="chapter-item expanded "><a href="../../../developer/controllers/IpPool.html"><strong aria-hidden="true">2.2.5.</strong> IpPool</a></li><li class="chapter-item expanded "><a href="../../../developer/controllers/IpClaim.html"><strong aria-hidden="true">2.2.6.</strong> IpClaim</a></li><li class="chapter-item expanded "><a href="../../../developer/controllers/IpAddress.html"><strong aria-hidden="true">2.2.7.</strong> IpAddress</a></li><li class="chapter-item expanded "><a href="../../../developer/controllers/Metal3Data.html"><strong aria-hidden="true">2.2.8.</strong> Metal3Data</a></li><li class="chapter-item expanded "><a href="../../../developer/controllers/Metal3DataClaim.html"><strong aria-hidden="true">2.2.9.</strong> Metal3DataClaim</a></li><li class="chapter-item expanded "><a href="../../../developer/controllers/Metal3DataTemplate.html"><strong aria-hidden="true">2.2.10.</strong> Metal3DataTemplate</a></li></ol></li><li class="chapter-item expanded "><a href="../../../developer/relational_diagram.html"><strong aria-hidden="true">2.3.</strong> Custom Resource Relational Diagram</a></li></ol></li><li class="chapter-item expanded "><a href="../../../references/references.html"><strong aria-hidden="true">3.</strong> References</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../references/glossary.html"><strong aria-hidden="true">3.1.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="../../../references/code-of-conduct.html"><strong aria-hidden="true">3.2.</strong> Code of Conduct</a></li><li class="chapter-item expanded "><a href="../../../references/contribution.html"><strong aria-hidden="true">3.3.</strong> Contribution</a></li><li class="chapter-item expanded "><a href="../../../references/roadmap.html"><strong aria-hidden="true">3.4.</strong> Roadmap</a></li></ol></li><li class="chapter-item expanded "><a href="../../../mdbook.html"><strong aria-hidden="true">4.</strong> Multi-repo Test with Mdbook</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../submodules/bmo/docs/api.html" class="active"><strong aria-hidden="true">4.1.</strong> BMO</a></li><li class="chapter-item expanded "><a href="../../../submodules/capm3/docs/api.html"><strong aria-hidden="true">4.2.</strong> CAPM3</a></li><li class="chapter-item expanded "><a href="../../../submodules/dev-env/index.html"><strong aria-hidden="true">4.3.</strong> Metal3-dev-env</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Metal³ Book</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/metal3-io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#api-and-resource-definitions" id="api-and-resource-definitions">API and Resource Definitions</a></h1>
<h2><a class="header" href="#baremetalhost" id="baremetalhost">BareMetalHost</a></h2>
<p><strong>Metal³</strong> introduces the concept of <strong>BareMetalHost</strong> resource, which
defines a physical host and its properties. The <strong>BareMetalHost</strong> embeds
two well differentiated sections, the bare metal host specification
and its current status.</p>
<h3><a class="header" href="#pausing-reconciliation" id="pausing-reconciliation">Pausing reconciliation</a></h3>
<p>It is possible to pause the reconciliation of a BareMetalHost object by adding
an annotation <code>baremetalhost.metal3.io/paused</code>. <strong>Metal³</strong>  provider sets the
value of this annotation as <code>metal3.io/capm3</code> when the cluster to which the
<strong>BareMetalHost</strong> belongs, is paused and removes it when the cluster is
not paused. If you want to pause the reconciliation of <strong>BareMetalHost</strong> you can
put any value on this annotation <strong>other than <code>metal3.io/capm3</code></strong>. Please make
sure that you remove the annotation  <strong>only if the value of the annotation is
not <code>metal3.io/capm3</code>, but another value that you have provided</strong>. Removing the
annotation will enable the reconciliation again.</p>
<h3><a class="header" href="#baremetalhost-spec" id="baremetalhost-spec">BareMetalHost spec</a></h3>
<p>The <em>BareMetalHost’s</em> <em>spec</em> defines the desire state of the host. It contains
mainly, but not only, provisioning details.</p>
<h4><a class="header" href="#spec-fields" id="spec-fields">Spec fields</a></h4>
<ul>
<li>
<p><em>bmc</em> -- The connection information for the BMC (Baseboard Management
Controller) on the host.</p>
<ul>
<li>
<p><em>address</em> -- The URL for communicating with the BMC controller, based
on the provider being used, the URL will look as follows:</p>
<ul>
<li>IPMI
<ul>
<li><code>ipmi://&lt;host&gt;:&lt;port&gt;</code>, an unadorned <code>&lt;host&gt;:&lt;port&gt;</code> is also accepted
and the port is optional, if using the default one (623).</li>
</ul>
</li>
<li>Dell iDRAC
<ul>
<li><code>idrac://</code> (or <code>idrac+http://</code> to disable TLS).</li>
<li><code>idrac-virtualmedia://</code> to use virtual media instead of PXE
for attaching the provisioning image to the host.</li>
</ul>
</li>
<li>Fujitsu iRMC
<ul>
<li><code>irmc://&lt;host&gt;:&lt;port&gt;</code>, where <code>&lt;port&gt;</code> is optional if using the default.</li>
</ul>
</li>
<li>Redfish
<ul>
<li><code>redfish://</code> (or <code>redfish+http://</code> to disable TLS)</li>
<li><code>redfish-virtualmedia://</code> to use virtual media instead of PXE
for attaching the provisioning image to the host.</li>
<li>The hostname or IP address, and the path to the system ID are
required for all variants.  For example
<code>redfish://myhost.example/redfish/v1/Systems/System.Embedded.1</code>
or <code>redfish://myhost.example/redfish/v1/Systems/1</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>credentialsName</em> -- A reference to a <em>secret</em> containing the
username and password for the BMC.</p>
</li>
<li>
<p><em>disableCertificateVerification</em> -- A boolean to skip certificate
validation when true.</p>
</li>
</ul>
</li>
<li>
<p><em>online</em> -- A boolean indicating whether the host should be powered on
(true) or off (false). Changing this value will trigger a change in
power state on the physical host.</p>
</li>
<li>
<p><em>consumerRef</em> -- A reference to another resource that is using the
host, it could be empty if the host is not being currently used.
For example, a <em>Machine</em> resource when the host is being used by the
<a href="https://github.com/kubernetes-sigs/cluster-api"><em>machine-api</em></a>.</p>
</li>
<li>
<p><em>externallyProvisioned</em> -- A boolean indicating whether the host
provisioning and deprovisioning are managed externally. When set,
the host’s power status and hardware inventory will be monitored
but no provisioning or deprovisioning operations are performed
on the host.</p>
</li>
<li>
<p><em>image</em> -- Holds details for the image to be deployed on a given host.</p>
<ul>
<li><em>url</em> -- The URL of an image to deploy to the host.</li>
<li><em>checksum</em> -- The actual checksum or a URL to a file containing
the checksum for the image at <em>image.url</em>.</li>
<li><em>checksumType</em> -- Checksum algorithms can be specified. Currently
only <code>md5</code>, <code>sha256</code>, <code>sha512</code> are recognized. If nothing is specified
<code>md5</code> is assumed.</li>
</ul>
</li>
<li>
<p><em>userData</em> -- A reference to the Secret containing the cloudinit user data
and its namespace, so it can be attached to the host before it boots
for configuring different aspects of the OS (like networking, storage, ...).</p>
</li>
<li>
<p><em>networkData</em> -- A reference to the Secret containing the network
configuration data (e.g. network_data.json) and its namespace, so it can be
attached to the host before it boots to set network up</p>
</li>
<li>
<p><em>description</em> -- A human-provided string to help identify the host.</p>
</li>
</ul>
<h3><a class="header" href="#baremetalhost-status" id="baremetalhost-status">BareMetalHost status</a></h3>
<p>Moving onto the next block, the <em>BareMetalHost’s</em> <em>status</em> which represents
the host’s current state. Including tested credentials, current hardware
details, etc.</p>
<h4><a class="header" href="#status-fields" id="status-fields">Status fields</a></h4>
<ul>
<li>
<p><em>goodCredentials</em> -- A reference to the secret and its namespace
holding the last set of BMC credentials the system was able to validate
as working.</p>
</li>
<li>
<p><em>triedCredentials</em> -- A reference to the secret and its namespace
holding the last set of BMC credentials that were sent to
the provisioning backend.</p>
</li>
<li>
<p><em>lastUpdated</em> -- The timestamp of the last time the status of the
host was updated.</p>
</li>
<li>
<p><em>operationalStatus</em> -- The status of the server. Value is one of the
following:</p>
<ul>
<li><em>OK</em> -- Indicates all the details for the host are known and working,
meaning the host is correctly configured and manageable.</li>
<li><em>discovered</em> -- Implies some of the host’s details are either
not working correctly or missing. For example, the BMC address is known
but the login credentials are not.</li>
<li><em>error</em> -- Indicates the system found some sort of irrecuperable error.
Refer to the <em>errorMessage</em> field in the status section for more details.</li>
</ul>
</li>
<li>
<p><em>errorMessage</em> -- Details of the last error reported by the provisioning
backend, if any.</p>
</li>
<li>
<p><em>hardware</em> -- The details for hardware capabilities discovered on the
host. These are filled in by the provisioning agent when the host is
registered.</p>
<ul>
<li><em>nics</em> -- List of network interfaces for the host.
<ul>
<li><em>name</em> -- A string identifying the network device,
e.g. <em>nic-1</em>.</li>
<li><em>mac</em> -- The MAC address of the NIC.</li>
<li><em>ip</em> -- The IP address of the NIC, if one was assigned
when the discovery agent ran.</li>
<li><em>speedGbps</em> -- The speed of the device in Gbps.</li>
<li><em>vlans</em> -- A list holding all the VLANs available for this NIC.</li>
<li><em>vlanId</em> -- The untagged VLAN ID.</li>
<li><em>pxe</em> -- Whether the NIC is able to boot using PXE.</li>
</ul>
</li>
<li><em>storage</em> -- List of storage (disk, SSD, etc.) available to the host.
<ul>
<li><em>name</em> -- A string identifying the storage device,
e.g. <em>disk 1 (boot)</em>.</li>
<li><em>rotational</em> -- Either true or false, indicates whether the disk
is rotational.</li>
<li><em>sizeBytes</em> -- Size of the storage device.</li>
<li><em>serialNumber</em> -- The device’s serial number.</li>
</ul>
</li>
<li><em>cpu</em> -- Details of the CPU(s) in the system.
<ul>
<li><em>arch</em> -- The architecture of the CPU.</li>
<li><em>model</em> -- The model string.</li>
<li><em>clockMegahertz</em> -- The speed in GHz of the CPU.</li>
<li><em>flags</em> -- List of CPU flags, e.g. ‘mmx’,’sse’,’sse2’,’vmx’, ...</li>
<li><em>count</em> -- Amount of these CPUs available in the system.</li>
</ul>
</li>
<li><em>firmware</em> -- Contains BIOS information like for instance its <em>vendor</em>
and <em>version</em>.</li>
<li><em>systemVendor</em> -- Contains information about the host’s <em>manufacturer</em>,
the <em>productName</em> and <em>serialNumber</em>.</li>
<li><em>ramMebibytes</em> -- The host’s amount of memory in Mebibytes.</li>
</ul>
</li>
<li>
<p><em>hardwareProfile</em> -- The name of the hardware profile that matches the
hardware discovered on the host. These details are saved
to the <em>Hardware</em> section. If the hardware does not match any
known profile, the value <code>unknown</code> will be set on this field
and is used by default. In practice, this only affects which device
the OS image will be written to. The following are the current
supported <code>hardwareProfile</code> settings and their corresponding root devices.</p>
<table><thead><tr><th><strong>hardwareProfile</strong></th><th><strong>Root Device</strong></th></tr></thead><tbody>
<tr><td><code>unknown</code></td><td>/dev/sda</td></tr>
<tr><td><code>libvirt</code></td><td>/dev/vda</td></tr>
<tr><td><code>dell</code></td><td>HCTL: 0:0:0:0</td></tr>
<tr><td><code>dell-raid</code></td><td>HCTL: 0:2:0:0</td></tr>
<tr><td><code>openstack</code></td><td>/dev/vdb</td></tr>
</tbody></table>
<p><strong>NOTE:</strong> These are subject to change.</p>
</li>
<li>
<p><em>poweredOn</em> -- Boolean indicating whether the host is powered on.
See <em>online</em> on the <em>BareMetalHost’s</em> <em>Spec</em>.</p>
</li>
<li>
<p><em>provisioning</em> -- Settings related to deploying an image to the host.</p>
<ul>
<li><em>state</em> -- The current state of any ongoing provisioning operation.
The following are the currently supported ones:
<ul>
<li><em>&lt;empty string&gt;</em> -- There is no provisioning happening, at the moment.</li>
<li><em>registration error</em> -- The details for the host’s BMC are
either incorrect or incomplete therfore the host could not be managed.</li>
<li><em>registering</em> -- The host’s BMC details are being checked.</li>
<li><em>match profile</em> -- The discovered hardware details on the host
are being compared against known profiles.</li>
<li><em>ready</em> -- The host is available to be consumed.</li>
<li><em>provisioning</em> -- An image is being written to the host’s disk(s).</li>
<li><em>provisioning error</em> -- The image could not be written to the host.</li>
<li><em>provisioned</em> -- An image has been completely written to the host’s
disk(s).</li>
<li><em>externally provisioned</em> -- Metal³ does not manage the image on the host.</li>
<li><em>deprovisioning</em> -- The image is being wiped from the host’s disk(s).</li>
<li><em>inspecting</em> -- The hardware details for the host are being collected
by an agent.</li>
<li><em>power management error</em> -- An error was found while trying to power
the host either on or off.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3><a class="header" href="#baremetalhost-example" id="baremetalhost-example">BareMetalHost Example</a></h3>
<p>The following is a complete example from a running cluster of a <em>BareMetalHost</em>
resource (in YAML), it includes its specification and status sections:</p>
<pre><code class="language-yaml">apiVersion: metal3.io/v1alpha1
kind: BareMetalHost
metadata:
  creationTimestamp: &quot;2019-09-20T06:33:35Z&quot;
  finalizers:
  - baremetalhost.metal3.io
  generation: 2
  name: bmo-master-0
  namespace: bmo-project
  resourceVersion: &quot;22642&quot;
  selfLink: /apis/metal3.io/v1alpha1/namespaces/bmo-project/baremetalhosts/bmo-master-0
  uid: 92b2f77a-db70-11e9-9db1-525400764849
spec:
  bmc:
    address: ipmi://10.10.57.19
    credentialsName: bmo-master-0-bmc-secret
  bootMACAddress: 98:03:9b:61:80:48
  consumerRef:
    apiVersion: machine.openshift.io/v1beta1
    kind: Machine
    name: bmo-master-0
    namespace: bmo-project
  externallyProvisioned: true
  hardwareProfile: default
  image:
    checksum: http://172.16.1.100/images/myOSv1/myOS.qcow2.md5sum
    url: http://172.16.1.100/images/myOSv1/myOS.qcow2
  online: true
  userData:
    name: bmo-master-user-data
    namespace: bmo-project
  networkData:
    name: bmo-master-network-data
    namespace: bmo-project
  metaData:
    name: bmo-master-meta-data
    namespace: bmo-project
status:
  errorMessage: &quot;&quot;
  goodCredentials:
    credentials:
      name: bmo-master-0-bmc-secret
      namespace: bmo-project
    credentialsVersion: &quot;5562&quot;
  hardware:
    cpu:
      arch: x86_64
      clockMegahertz: 2000
      count: 40
      flags: []
      model: Intel(R) Xeon(R) Gold 6138 CPU @ 2.00GHz
    firmware:
      bios:
        date: 12/17/2018
        vendor: Dell Inc.
        version: 1.6.13
    hostname: bmo-master-0.localdomain
    nics:
    - ip: 172.22.135.105
      mac: &quot;00:00:00:00:00:00&quot;
      model: unknown
      name: eno1
      pxe: true
      speedGbps: 25
      vlanId: 0
    ramMebibytes: 0
    storage: []
    systemVendor:
      manufacturer: Dell Inc.
      productName: PowerEdge r460
      serialNumber: &quot;&quot;
  hardwareProfile: &quot;&quot;
  lastUpdated: &quot;2019-09-20T07:03:23Z&quot;
  operationalStatus: OK
  poweredOn: true
  provisioning:
    ID: a4438010-3fc6-4c5c-b570-900bbe85da57
    image:
      checksum: &quot;&quot;
      url: &quot;&quot;
    state: externally provisioned
  triedCredentials:
    credentials:
      name: bmo-master-0-bmc-secret
      namespace: bmo-project
    credentialsVersion: &quot;5562&quot;
</code></pre>
<p>And here it is the secret <code>bmo-master-0-bmc-secret</code> holding the host’s BMC credentials:</p>
<pre><code class="language-yaml">---
apiVersion: v1
kind: Secret
metadata:
  name: bmo-master-0-bmc-secret
type: Opaque
data:
  username: YWRtaW4=
  password: cGFzc3dvcmQ=
</code></pre>
<h2><a class="header" href="#triggering-provisioning" id="triggering-provisioning">Triggering Provisioning</a></h2>
<p>Several conditions must be met in order to initiate provisioning.</p>
<ol>
<li>The host <code>spec.image.url</code> field must contain a URL for a valid
image file that is visible from within the cluster and from the
host receiving the image.</li>
<li>The host must have <code>online</code> set to <code>true</code> so that the operator will
keep the host powered on.</li>
</ol>
<p>To initiate deprovisioning, clear the image URL from the host spec.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../../mdbook.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../../submodules/capm3/docs/api.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../../mdbook.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../../submodules/capm3/docs/api.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
